ActiveToc=function(){let e,t,i,o,r;function n(n){let c;if(e=function(t){return e=t||{},e}(n),e.tocContainer?"string"==typeof e.tocContainer?c="#"==e.tocContainer.charAt(0)?e.tocContainer:"#"+e.tocContainer:r=e.tocContainer:c="#header",document.querySelector&&window.IntersectionObserver){if(c&&(r=document.querySelector(c),r||(r=document.getElementsByTagName("header")[0]),!r))return void console.error("A toc container with id=["+c+"] or the tag=<header> could not be found in DOM");t=[...r.querySelectorAll("a")],i=t.map(e=>{let t=e.getAttribute("href");return document.querySelector(t)}),o=new IntersectionObserver(s,{rootMargin:"0px"}),i.forEach(e=>{e&&o.observe(e)})}else console.error("ActiveToc cannot run on this device because querySelector or intersectionObserver are not supported.")}function c(){i&&i.forEach(e=>{e&&o.unobserve(e)})}function s(e,o){e.forEach(e=>{let o=`#${e.target.getAttribute("id")}`;t.forEach(t=>{t.classList.remove("is-highlight"),t.classList.remove("is-active"),t.getAttribute("href")===o&&(e.isIntersecting?t.classList.add("is-visible"):t.classList.remove("is-visible"))}),function(){for(let e=i.length-1;e>=0;e--)if(i[e]&&i[e].offsetTop<=window.pageYOffset){r.querySelectorAll(`a[href="#${i[e].id}"]`).forEach(e=>{e.classList.add("is-active")});break}}(),function(){let e;for(let i of t)i.classList.contains("is-visible")&&(e||(e=i.href),e===i.href&&i.classList.add("is-highlight"));if(!e){r.querySelectorAll("a.is-active").forEach(e=>{e.classList.add("is-highlight")})}}()})}return{init:function(e){n(e)},unobserve:function(){c()},destroy:function(){c(),t&&t.forEach(e=>{e.classList.remove("is-visible"),e.classList.remove("is-active")})}}}();try{module&&(module.exports={init:function(e){this.activeToc||(this.activeToc=ActiveToc),this.activeToc.init(e)},destroy:function(){this.activeToc&&this.activeToc.destroy()},unobserve:function(){this.activeToc&&this.activeToc.unobserve()}})}catch(e){console.log("Using ActiveToc in non-node environment")}
