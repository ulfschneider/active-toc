ActiveToc=function(){let i,t,e,o=[],s=[];function n(n){let c;i=function(i){if("string"==typeof i||i instanceof String)return{tocContainer:i};let t=Object.assign({},i);return t.tocContainer||(t.tocContainer="#header"),t}(n),"string"==typeof i.tocContainer||i.tocContainer instanceof String?c=i.tocContainer:i.tocContainer?e=i.tocContainer:c="header",document.querySelector&&window.IntersectionObserver?(c&&(e=document.querySelector(c),e?(o=[...e.querySelectorAll("a")],o.forEach((i=>{let t=i.getAttribute("href");if(t&&t.startsWith("#"))try{s.push(document.querySelector(t))}catch(i){console.warn("Heading with id=["+t+"] not found in document")}}))):(console.log("A toc container with selector=["+c+"] could not be found in the document"),n.headless&&(console.log("Working in headless mode"),s=[...document.querySelectorAll("h2, h3, h4, h5, h6")]))),t=new IntersectionObserver(l,i.intersectionOptions),s.forEach((i=>{i&&t.observe(i)}))):console.error("ActiveToc cannot run on this device because the Intersection Observer API is not supported")}function c(){s.forEach((i=>{t.unobserve(i),i.classList.remove("h-is-visible"),i.classList.remove("h-is-active"),i.classList.remove("h-is-highlight")}))}function l(t,o){t.forEach((t=>{!function(t){s.forEach((o=>{let s=r(o.id);o.classList.remove("h-is-highlight"),o.classList.remove("h-is-active"),s.forEach((i=>{i.classList.remove("is-highlight"),i.classList.remove("is-active")})),o.id==t.target.id&&(t.isIntersecting?(o.classList.add("h-is-visible"),s.forEach((t=>{t.classList.add("is-visible"),i.onVisible&&i.onVisible(t,o)})),!e&&i.onVisible&&i.onVisible(null,o)):(o.classList.remove("h-is-visible"),s.forEach((i=>{i.classList.remove("is-visible")}))))}))}(t),function(t){for(let t=s.length-1;t>=0;t--)if(s[t].offsetTop<=window.pageYOffset){let o=r(s[t].id);s[t].classList.add("h-is-active"),o.forEach((e=>{e.classList.add("is-active"),i.onActive&&i.onActive(e,s[t])})),!e&&i.onActive&&i.onActive(null,s[t]);break}}(),function(t){let o;if(s.forEach((t=>{let s=r(t.id);if(t.classList.contains("h-is-visible")&&!o){o=t.id,t.classList.add("h-is-highlight");for(let e of s)e.classList.add("is-highlight"),i.onHighlight&&i.onHighlight(e,t);!e&&i.onHighlight&&i.onHighlight(null,t)}})),!o){let t=!1;s.forEach((o=>{if(o.classList.contains("h-is-active")){t=!0,o.classList.add("h-is-highlight");let s=r(o.id);for(let t of s)t.classList.add("is-highlight"),i.onHighlight&&i.onHighlight(t,o);!e&&i.onHighlight&&i.onHighlight(null,o)}})),!t&&i.offHighlight&&i.offHighlight()}}()}))}function r(i){return e?e.querySelectorAll(`a[href="#${i}"]`):[]}return{init:function(i){n(i)},unobserve:function(){c()},destroy:function(){c(),o.forEach((i=>{i.classList.remove("is-visible"),i.classList.remove("is-active"),i.classList.remove("is-highlight")}))}}}();try{module&&(module.exports={init:function(i){this.activeToc||(this.activeToc=ActiveToc),this.activeToc.init(i)},destroy:function(){this.activeToc&&this.activeToc.destroy()},unobserve:function(){this.activeToc&&this.activeToc.unobserve()}})}catch(i){console.log("Using ActiveToc in non-module environment")}
