ActiveToc=function(){let e,t,i,o,n;function c(c){let r;if(e=function(e){if("string"==typeof e||e instanceof String)return{tocContainer:e};let t=Object.assign({},e);return t.tocContainer||(t.tocContainer="#header"),t}(c),"string"==typeof e.tocContainer||e.tocContainer instanceof String?r=e.tocContainer:n=e.tocContainer,document.querySelector&&window.IntersectionObserver){if(r&&(n=document.querySelector(r),n||(n=document.querySelector("header")),!n))return void console.error("A toc container with selector=["+r+"] or the tag=<header> could not be found in the document");t=[...n.querySelectorAll("a")],i=[],t.forEach((e=>{let t=e.getAttribute("href");if(t&&t.startsWith("#"))try{i.push(document.querySelector(t))}catch(e){console.warn("Heading with id=["+t+"] not found in document")}})),o=new IntersectionObserver(s,e.intersectionOptions),i.forEach((e=>{e&&o.observe(e)}))}else console.error("ActiveToc cannot run on this device because the Intersection Observer API is not supported")}function r(){i&&i.forEach((e=>{e&&o.unobserve(e)}))}function s(o,c){o.forEach((o=>{let c=`#${o.target.getAttribute("id")}`;t.forEach((t=>{t.classList.remove("is-highlight"),t.classList.remove("is-active"),t.getAttribute("href")===c&&(o.isIntersecting?(t.classList.add("is-visible"),e.onVisible&&e.onVisible(t)):t.classList.remove("is-visible"))})),function(){for(let t=i.length-1;t>=0;t--)if(i[t]&&i[t].offsetTop<=window.pageYOffset){n.querySelectorAll(`a[href="#${i[t].id}"]`).forEach((t=>{t.classList.add("is-active"),e.onActive&&e.onActive(t)}));break}}(),function(){let i;for(let o of t)o.classList.contains("is-visible")&&(i||(i=o.href),i==o.href&&(o.classList.add("is-highlight"),e.onHighlight&&e.onHighlight(o)));if(!i){let t=n.querySelectorAll("a.is-active");t.forEach((t=>{t.classList.add("is-highlight"),e.onHighlight&&e.onHighlight(t)})),0==t.length&&e.offHighlight&&e.offHighlight()}}()}))}return{init:function(e){c(e)},unobserve:function(){r()},destroy:function(){r(),t&&t.forEach((e=>{e.classList.remove("is-visible"),e.classList.remove("is-active")}))}}}();try{module&&(module.exports={init:function(e){this.activeToc||(this.activeToc=ActiveToc),this.activeToc.init(e)},destroy:function(){this.activeToc&&this.activeToc.destroy()},unobserve:function(){this.activeToc&&this.activeToc.unobserve()}})}catch(e){console.log("Using ActiveToc in non-node environment")}
